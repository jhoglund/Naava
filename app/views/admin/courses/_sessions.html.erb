<% sessions.fields_for :sessions do |session| -%>
  <div class="session">
  <div>
    <%= session.hidden_field '_delete', :value => 0 %>
    <%#= session.check_box '_delete' %>
    <%= session.label :starts_at %><br />
    <%= session.datetime_select :starts_at %>
  </div>
  <div>
    <%= session.label :duration %><br>
    <%= session.label :hours %>
    <%= session.select :duration_hours, (0...24), :selected => session.object.duration_hours %>
    <%= session.label :minutes %>
    <%= session.select :duration_minutes, [0,15,30,45], :selected => session.object.duration_minutes %>
  </div>

  <%= link_to_function "remove", "(function(item){
    var to_delete = item.getElementsByTagName('input')[0];
    to_delete.value = 1;
    to_delete.id = to_delete.id.replace(/no_delete/,'_delete')
    console.log(to_delete)
  })($(this).up('.session')); $(this).up('.session').hide(); " %>
  </div>
<% end -%>